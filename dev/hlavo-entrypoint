#!/usr/bin/env bash
set -xeuo pipefail

CONDA_BASE="${CONDA_BASE:-/home/hlavo/miniconda3}"
ENV_NAME="${ENV_NAME:-hlavo}"

if [[ $# -eq 0 ]]; then
  set -- bash
fi

CONDA_SH="$CONDA_BASE/etc/profile.d/conda.sh"
if [[ ! -f "$CONDA_SH" ]]; then
  echo "ERROR: conda.sh not found at $CONDA_SH" >&2
  exit 1
fi

# Run directly with conda env active.
# shellcheck disable=SC1090
source "$CONDA_SH"
conda activate "$ENV_NAME"
exec "$@"
